
## 直接使用 first-forever 代码部署

按照 README.md 的步骤

添加正确的 config.js

```js
const config = {
  chain: 'http://121.196.200.225:1337 ',
  privateKey:
    '0x5d3c73fa94c85bbcb516cb256a4e82c414255a270b5d065179a94aa0d5dc3efe',
  contractAddress: ''
}
module.exports = config
```

```
npm run deploy
```

部署成功

```
contractAddress is: 0x27f63950263e749A861674065dC4F664c2fa542C
[ { constant: false,
    inputs: [ [Object], [Object] ],
    name: 'add',
    outputs: [],
    payable: false,
    stateMutability: 'nonpayable',
    type: 'function',
    signature: '0x36555b85' },
  { anonymous: false,
    inputs: [ [Object], [Object], [Object] ],
    name: 'Recorded',
    type: 'event',
    signature:
     '0xe4af93ca7e370881e6f1b57272e42a3d851d3cc6d951b4f4d2e7a963914468a2' },
  { constant: true,
    inputs: [ [Object] ],
    name: 'get',
    outputs: [ [Object] ],
    payable: false,
    stateMutability: 'view',
    type: 'function',
    signature: '0x9507d39a' },
  { constant: true,
    inputs: [],
    name: 'getList',
    outputs: [ [Object] ],
    payable: false,
    stateMutability: 'view',
    type: 'function',
    signature: '0x942b765a' } ]
```

到 https://microscope.cryptape.com/ 搜一下 contractAddress ，发现出现的就是一个 Account ，下面又 contract 一项。部署成功了。

## 与合约交互

first-forever 的配置文件中添加上合约地址，就可以成功的跟合约交互了，so easy

编译过程使用 remix 比较简单，如果要自己安装编译器，请参考：https://solidity.readthedocs.io/en/v0.4.24/installing-solidity.html#

## 把编译过程跟前端代码分离出来

deploy-js 中，已经工作了

- 合约账户
  - 合约部署的直观结果是我们得到了一个账户，但是我们仅仅有这个账户的地址，而没有账户的公钥、私钥，这就是合约定义：contract instance is an account controlled by code 的准确含义，后续和合约的交互也只能通过代码，即智能合约的函数调用。...
  
- validUntilBlock 设置交易有效期，避免各种问题。
- nervos.appchain.storeAbi
  - 把 ABI 发送到 AppChain
    - https://www.npmjs.com/package/@nervos/chain
- myContract.deploy()
  - 部署合约
- receipt ，需要拿到收据，因为收据中有地址
- privateKeyToAccount 用私钥生成 account
